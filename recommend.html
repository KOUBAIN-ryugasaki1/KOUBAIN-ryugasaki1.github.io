<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>ã“ã†ãƒã‚¤ã‚“-AIãŠã™ã™ã‚è¨ºæ–­</title>
        <link rel="icon" href="https://drive.google.com/uc?id=1lzQEwSwboyTzgRMtd59LI8Ksad71wzKu">
        <link rel="apple-touch-icon" href="https://drive.google.com/uc?id=167a17E-XTmhatZxz1s9Rd-KYmnla5mEd">    
    </head>
    <body>
        <header>
            <img src="https://drive.google.com/uc?id=13ALCeiYNFyHaZQcFPaG1OZ4ezXfOg8jz" class="top-top">
            <ul class="top-list">
                <li class="top-list-item"><a href="https://koubain.github.io" class="t-m">ã€€Homeã€€</a></li>
                <li class="top-list-item-1"><a href="https://koubain.github.io/recommend.html" class="t-m">ã€€AIãŠã™ã™ã‚è¨ºæ–­ã€€</a></li>
                <li class="top-list-item"><a href="https://koubain.github.io/oder.html" class="t-m">ã€€Oderã€€</a></li>
                <li class="top-list-item"><a href="https://koubain.github.io/menu.html" class="t-m">ã€€Menuã€€</a></li>
                <li class="top-list-item"><a href="https://koubain.github.io/about.html" class="t-m">ã€€Aboutã€€</a></li>
            </ul>
        </header>
        <main>
            <div class="loop_wrap">
                <img src="https://drive.google.com/uc?id=1QBK_cntjAYUTV9dm4xgnOWvck6cdlQKe"><img src="https://drive.google.com/uc?id=1QBK_cntjAYUTV9dm4xgnOWvck6cdlQKe">
            </div>
            <br>
            <h1 class="title">AI ãŠã™ã™ã‚è¨ºæ–­</h1>
            <br>
            <hr class="sen">
            <br>
            <script>
                // Prediction Oneã®APIä½œæˆç”»é¢ã§è¡¨ç¤ºã•ã‚Œã‚‹API URLã¨API Keyã‚’è¨­å®šã™ã‚‹
const PREDICTION_ONE_KEY = "09f2987e-2a22-4fd9-8cb0-aff042f5cc17";
const PREDICTION_ONE_URL = "https://user-api.predictionone.sony.biz/v1/groups/pdm9airlpozx6k24/classifiers/qgj3hwgalm9d0wz7/inference";

// APIãŒå—ã‘ä»˜ã‘ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«å¤‰æ›ã™ã‚‹
function b64Decode(str) {
    const encodedURI = atob(str).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join('')
    const result = decodeURIComponent(encodedURI);
    return result;
}
function b64Encode(str) {
    const stringToEncode = encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,
        function toSolidBytes(match, p1) {
            return String.fromCharCode('0x' + p1);
    })
    const result = btoa(stringToEncode);
    return result;
}
// APIã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹
async function postData(url = '', data = {}, key ) {
    
    hoge = await fetch(url, {
        method: 'POST',
        mode: 'cors', 
        headers: {
            'Content-Type': 'application/json',
            "x-api-key": key,
        },
        body: JSON.stringify(data)
    }).then(response => response.json())
    .then(data => {
        return  b64Decode( data.outputs[0].data) 
    })
    .catch((error) => {
        console.error('Error:', error);
    });
    return hoge;
}

async function predict(pred_data, preidcion_one_url, key  ){

    const url = preidcion_one_url;
    // APIã¸ã®é€ä¿¡å†…å®¹ã‚’æ•´ãˆã‚‹
    const data = 
            {"inputs":
                [
                    {"name":"pr","type":"csv","data": b64Encode(pred_data)},
                    {"name":"ar","type":"boolean","data":true},
                    {"name":"ad","type":"boolean","data":false},
                    {"name":"nc","type":"boolean","data":true}]
                }
        return await postData(url,data,key);
}

// é€ä¿¡ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚ã®å‡¦ç†
submit = async function(){
    document.querySelector("#result").innerText = "äºˆæ¸¬ä¸­";
    document.querySelector( "#submit" ).disabled = true;
    document.querySelector("#result").className ="";
    document.querySelector("#resultsec").innerText = "äºˆæ¸¬ä¸­";
    document.querySelector( "#submit" ).disabled = true;
    document.querySelector("#resultsec").className ="";
    document.querySelector("#resultth").innerText = "äºˆæ¸¬ä¸­";
    document.querySelector( "#submit" ).disabled = true;
    document.querySelector("#resultth").className ="";
    
    const selects = document.querySelectorAll("select");
    const data = [ [],[] ];
    selects.forEach( elm =>{
        data[ 0 ].push( elm.name );
        data[ 1 ].push(elm.value);
    } );
    const data_str = data[0].join(",") + "\n" + data[1].join(",");
    const result = await predict( data_str, PREDICTION_ONE_URL, PREDICTION_ONE_KEY ) ;

    const names =  result.split("\n")[0].split(",");
    names.shift()
    const scores = result.split("\n")[1].split(",");
    scores.shift()

    for (let i=0; i<scores.length-1; i++){
        for(let j=0; j<scores.length-i; j++){
            if(scores[j]<scores[j+1]){
                var ntmp=scores[j];
                scores[j]=scores[j+1];
                scores[j+1]=ntmp;

                var mtmp=names[j];
                names[j]=names[j+1];
                names[j+1]=mtmp;
            }
        }
    }
   
    console.log(names)
    console.log(scores)
    console.log(names[0])
    document.querySelector("#result").innerText = names[0]+"\nãŠã™ã™ã‚åº¦ " + Math.round(scores[0]*100) + "%";
    document.querySelector("#resultsec").innerText = names[1]+"\nãŠã™ã™ã‚åº¦ " + Math.round(scores[1]*100) + "%";
    document.querySelector("#resultth").innerText = names[2]+"\nãŠã™ã™ã‚åº¦ " + Math.round(scores[2]*100) + "%";
    document.querySelector( "#submit" ).disabled = false;
}
            </script>
                <h1 style="text-align: center;">ã‚ãªãŸã¸ã®ãŠã™ã™ã‚ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ•™ãˆã¾ã™ï¼</h1>
                <h2 style="text-align: center;">æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼</h2>
                <br>
                <hr class="sen">
                <br>
                    <h3 style="text-align: center;">å­¦å¹´ãƒ»ã‚¯ãƒ©ã‚¹</h3>
                        <select name="grade" style="margin-left: 41%;width: 18%;" id="grade">
                            <option value="-">-ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼¡çµ„">ï¼‘å¹´ï¼¡çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼¢çµ„">ï¼‘å¹´ï¼¢çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼£çµ„">ï¼‘å¹´ï¼£çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼¤çµ„">ï¼‘å¹´ï¼¤çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼¥çµ„">ï¼‘å¹´ï¼¥çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼¦çµ„">ï¼‘å¹´ï¼¦çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼‘å¹´ï¼§çµ„">ï¼‘å¹´ï¼§çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼¡çµ„">ï¼’å¹´ï¼¡çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼¢çµ„">ï¼’å¹´ï¼¢çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼£çµ„">ï¼’å¹´ï¼£çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼¤çµ„">ï¼’å¹´ï¼¤çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼¥çµ„">ï¼’å¹´ï¼¥çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼¦çµ„">ï¼’å¹´ï¼¦çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼’å¹´ï¼§çµ„">ï¼’å¹´ï¼§çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼¡çµ„">ï¼“å¹´ï¼¡çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼¢çµ„">ï¼“å¹´ï¼¢çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼£çµ„">ï¼“å¹´ï¼£çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼¤çµ„">ï¼“å¹´ï¼¤çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼¥çµ„">ï¼“å¹´ï¼¥çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼¦çµ„">ï¼“å¹´ï¼¦çµ„ã€€ã€€ã€€ã€€</option>
                            <option value="é«˜æ ¡ï¼“å¹´ï¼§çµ„">ï¼“å¹´ï¼§çµ„ã€€ã€€ã€€ã€€</option>
                        </select>
                <br>
                <br>
                    <h3 style="text-align: center;">æ€§åˆ¥</h3>
                        <select name="gender" style="margin-left: 41%;width: 18%;" id="gender">
                            <option value="-">-</option>
                            <option value="ç”·æ€§">ç”·æ€§ã€€ã€€ã€€ã€€ã€€ã€€</option>
                            <option value="å¥³æ€§">å¥³æ€§ã€€ã€€ã€€ã€€ã€€ã€€</option>
                            <option value="ãã®ä»–">ãã®ä»–ã€€ã€€ã€€ã€€ã€€</option>
                        </select>
                <br>
                <br>
                    <h3 style="text-align: center;">è³¼è²·éƒ¨ã‚’åˆ©ç”¨ã—ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ</h3>
                        <select name="use" style="margin-left: 41%;width: 18%;" id="use">
                            <option value="-">-</option>
                            <option value="åˆ©ç”¨ã—ãŸã“ã¨ãŒã‚ã‚‹ã€‚">ã‚ã‚‹ã€€ã€€ã€€ã€€ã€€ã€€</option>
                            <option value="åˆ©ç”¨ã—ãŸã“ã¨ãŒãªã„ã€‚">ãªã„ã€€ã€€ã€€ã€€ã€€ã€€</option>
                        </select>
                <br>
                <br>
                    <h3 style="text-align: center;">ã©ã®ãã‚‰ã„ã®ä¾¡æ ¼å¸¯ã§è³¼å…¥ã—ãŸã„ã§ã™ã‹ï¼Ÿ</h3> 
                    <select name="price" style="margin-left: 41%;width: 18%;" id="price">
                            <option value="-">-</option>
                            <option value="ã€€ï¼•ï¼ï½ï¼‘ï¼ï¼å††">ã€€ï¼•ï¼ï½ï¼‘ï¼ï¼å††</option>
                            <option value="ï¼‘ï¼ï¼ï½ï¼’ï¼ï¼å††">ï¼‘ï¼ï¼ï½ï¼’ï¼ï¼å††</option>
                            <option value="ï¼’ï¼ï¼ï½ï¼“ï¼ï¼å††">ï¼’ï¼ï¼ï½ï¼“ï¼ï¼å††</option>
                            <option value="ï¼“ï¼ï¼ï½ï¼”ï¼ï¼å††">ï¼“ï¼ï¼ï½ï¼”ï¼ï¼å††</option>
                            <option value="ï¼”ï¼ï¼ï½ï¼•ï¼ï¼å††">ï¼”ï¼ï¼ï½ï¼•ï¼ï¼å††</option>
                            <option value="ï¼•ï¼ï¼ï½ï¼–ï¼ï¼å††">ï¼•ï¼ï¼ï½ï¼–ï¼ï¼å††</option>
                            <option value="ï¼–ï¼ï¼å††ï½">ï¼–ï¼ï¼å††ï½ã€€ã€€ã€€</option>
                    </select>
                <br>
            <button onclick="submit()" id="submit" class="soushin" style="background-color: #ffe4aa; border-radius: 9px; border-width: 1.5px; outline-width: 1.5px;border-color: #ffc13a; outline-color: #ffc13a;width: 40%;">ãŠã™ã™ã‚è¨ºæ–­é–‹å§‹ï¼</button>
            </div>
            <hr class="sen">
            <br>
            <div class="result_container1">
                <h2 style="width: 19%;margin-left: 19.5%;text-align: center;">ãŠã™ã™ã‚ No.1</h2>
                <h2 style="width: 19%;margin-left: 2%;margin-right: 2%;text-align: center;">ãŠã™ã™ã‚ No.2</h2>
                <h2 style="width: 19%;text-align: center;">ãŠã™ã™ã‚ No.3</h2>
            </div>
            <br>
            <div class="result_container">
                <p id="result" style="width: 19%;margin-left: 19.5%;font-size: 20px;">-----</p>
                <p id="resultsec" style="width: 19%;margin-left: 2%;margin-right: 2%;font-size: 20px;">-----</p>
                <p id="resultth" style="width: 19%;font-size: 20px;">-----</p>
            </div>
            <br>
            <hr class="sen">
            <br>
            <form>
            <p><span id="span3"></span></p>
            <h2 style="text-align: center;">AIãŠã™ã™ã‚è¨ºæ–­ã¯å½¹ã«ç«‹ã¡ã¾ã—ãŸã‹ï¼Ÿ</h2>
            <br>
            <div class="hyouka">
            <input type="submit" value="ğŸ‘" formaction="https://script.google.com/macros/s/AKfycbyk81AYKLt02IUKc5n0VUjYIEV66woQNznLKV0l4wgDNX5VQ0nlF5QkNDvnrLCXrTc3DA/exec" formmethod="post" class="goodbad" style="background-color: #ffe4aa; border-radius: 9px; border-width: 1.5px; outline-width: 1.5px;border-color: #ffc13a; outline-color: #ffc13a; width: 18%;margin-left: 31.25%;">
            <input type="submit" value="ğŸ‘" formaction="https://script.google.com/macros/s/AKfycbyk81AYKLt02IUKc5n0VUjYIEV66woQNznLKV0l4wgDNX5VQ0nlF5QkNDvnrLCXrTc3DA/exec" formmethod="post" class="goodbad" style="background-color: #ffe4aa; border-radius: 9px; border-width: 1.5px; outline-width: 1.5px;border-color: #ffc13a; outline-color: #ffc13a; width: 18%;margin-left: 1.5%;">
            </div>
            </form>
            <br>
            <br>
            <div class="loop_wrap">
                <img src="https://drive.google.com/uc?id=1QBK_cntjAYUTV9dm4xgnOWvck6cdlQKe"><img src="https://drive.google.com/uc?id=1QBK_cntjAYUTV9dm4xgnOWvck6cdlQKe">
            </div>
        </main>
        <footer>
            <br>
            <ul class="footer-menu">
                <li><a href="https://koubain.github.io" class="f-m">Home ï½œ</a></li>
                <li><a href="https://koubain.github.io/recommend.html" class="f-m">AIãŠã™ã™ã‚è¨ºæ–­ ï½œ</a></li>
                <li><a href="https://koubain.github.io/oder.html" class="f-m">Oder ï½œ</a></li>
                <li><a href="https://koubain.github.io/menu.html" class="f-m">Menu ï½œ</a></li>
                <li><a href="https://koubain.github.io/about.html" class="f-m">About</a></li>
            </ul>
            <p class="footer-spece">ã€€</p>
            <p class="Copyright">Â© 2022 KOUBAIN</p>
        </footer>
    <style>
    select {
    font-size: 1.1em;
    padding: 10px;
    margin-left: 20px;
}

button {
    font-size: 1.2em;
    display: block;
    width: 50%;
    margin: 30px auto;
    padding: 10px 0;
}

.result_container {
    display: flex;

}

.result_container1 {
    display: flex;

}

.hyouka {
    text-align: center;
    display: flex;
}

.pin1 {
    height: 39px;
    width: 200px;
    font-size: 17.6px;
}

.sel1 {
    display: flex;
    margin-left: 9%;
}

.sel2 {
    display: flex;
}

.sel-t {
    text-align: center;
}

.sen {
    margin-left: 7%;
    width: 85%;
    
}

#result {
    border: 1px solid #ddd;
    padding: 10px;
    line-height: 3em;
    text-align: center;
    font-weight: bold;

}
#resultsec {
    border: 1px solid #ddd;
    padding: 10px;
    line-height: 3em;
    text-align: center;
    font-weight: bold;

}
#resultth {
    border: 1px solid #ddd;
    padding: 10px;
    line-height: 3em;
    text-align: center;
    font-weight: bold;

}

.goodbad {
    height: 49px;
    font-size: 29.2px;
    text-align: center;
}

#result.high {
    color: red;
    background-color: rgba(255, 0, 0, 0.2);
}

#result.middle {
    color: sienna;
    background-color: rgba(255, 255, 0, 0.2);
}



/*ä¸Šã®éš™é–“ã‚’ãªãã—ã¦ã‚‹*/
*{
    margin: 0;
    padding: 0;}

/*ãƒšãƒ¼ã‚¸å·¦ä¸Šã®ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³*/
.top-top{
    height: 90px;
    margin-left: 35px;
    float: left;}

/*ãƒ˜ãƒƒãƒ€ãƒ¼å…¨ä½“*/
header{
    width: 100%;
    height: 90px;
    text-align: center;
    background-color: #f5cf89;}  

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®éˆ´-->*/    
header .suzu{
    height: 60px;
    text-align: center;
    margin-left: 7%;
    margin-top: 75px;}

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼*/
header .top-list{
    line-height: 40px;
    margin-top: 20px;
    float: right;
    margin-right: 70px;
    list-style: none;
    color: #ffffff;}

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è‰²å¤‰ãˆ*/
.t-m{
    color: inherit;
    text-decoration: none;}

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®é–‹ã„ã¦ã‚‹ãƒšãƒ¼ã‚¸ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼*/
header .top-list-item-1{
    list-style: none;
    display: inline-block;
    margin: 0 3px;
    border-bottom: 3px solid #ffffff;
    position: relative;}

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®é–‹ã„ã¦ã‚‹ãƒšãƒ¼ã‚¸ä»¥å¤–ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼â‘ */
header .top-list-item{
    list-style: none;
    display: inline-block;
    margin: 0 3px;
    position: relative;}

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®é–‹ã„ã¦ã‚‹ãƒšãƒ¼ã‚¸ä»¥å¤–ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼â‘¡*/
header .top-list-item::before {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0px;
    width: 100%;
    height: 3px;
    background: #ffffff;
    display: block;
    -webkit-transform-origin: right top;
    -ms-transform-origin: right top;
    transform-origin: right top;
    -webkit-transform: scale(0, 1);
    -ms-transform: scale(0, 1);
    transform: scale(0, 1);
    -webkit-transition: transform 0.4s cubic-bezier(1, 0, 0, 1);
    transition: transform 0.4s cubic-bezier(1, 0, 0, 1)}

/*ãƒ˜ãƒƒãƒ€ãƒ¼ã®é–‹ã„ã¦ã‚‹ãƒšãƒ¼ã‚¸ä»¥å¤–ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼â‘¢*/    
header .top-list-item:hover::before {
    -webkit-transform-origin: left top;
    -ms-transform-origin: left top;
    transform-origin: left top;
    -webkit-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1)}

/*ãƒ•ãƒƒã‚¿ãƒ¼å…¨ä½“*/
footer{
    width: 100%;
    height: 100px;
    background-color: #f5cf89;
    color: white;
    text-align: center;}

/*ãƒ•ãƒƒã‚¿ãƒ¼ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ä¸¦ã¹ã¦ã‚‹*/
    ul.footer-menu li {
    display: inline;
    }

/*ãƒ•ãƒƒã‚¿ãƒ¼ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è‰²å¤‰ãˆ*/
.f-m{
    color: inherit;
    text-decoration: none;}

/*ãƒ•ãƒƒã‚¿ãƒ¼ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨Â©ã®éš™é–“*/
footer .footer-spece{
    font-size: 1px;}

/*ãƒ¡ã‚¤ãƒ³èƒŒæ™¯*/
main{
    background-image: url(https://drive.google.com/uc?id=1Sbp0BmmlCHDDNyHWXjH5nOlU1GAESxUD);
    background-size: 100% 10000px;
    background-repeat: no-repeat;}

/*ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«*/
main .title{
    font-size: 70px;
    color: #926400;
    text-align: center;}

.loop_wrap {
    display: flex;
    height: 60px;
    overflow: hidden;
  }
  
.loop_wrap img {
    width: auto;
    height: 100%;
  }

  @keyframes loop {
    0% {
      transform: translateX(100%);
    }
    to {
      transform: translateX(-100%);
    }
  }
  
  @keyframes loop2 {
    0% {
      transform: translateX(0);
    }
    to {
      transform: translateX(-200%);
    }
  }

  .loop_wrap img:first-child {
    animation: loop 50s -25s linear infinite;
  }
  
  .loop_wrap img:last-child {
    animation: loop2 50s linear infinite;
  }

.news {
    border: 2px solid #ddd;
    padding: 10px;
    width: 70%;
    margin: 0 auto;
    line-height: 2.1em;
    text-align: center;
    font-weight: bold;

}
</style>
    </body>
</html>
